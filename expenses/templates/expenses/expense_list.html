{% extends "base.html" %}

{% block content %}

    {#    class="form-group"#}

    <a href="{% url 'expenses:expense-create' %}">add</a>
    <div class="container">
        <form method="get" action="">
            <div class="form-group">
                {{ form.as_p }}
                <button type="submit">search</button>
            </div>
        </form>
    </div>
    <br>


    {#    <table border="1">#}
    <table id="dtBasicExample" class="table table-striped table-bordered table-sm" cellspacing="0" style="width:50%;">
        <caption>Expenses</caption>
        <thead>
        <tr>
            <th>no.</th>
            <th>category</th>
            <th>name</th>
            <th>amount</th>
            <th>date</th>
            <th>actions</th>
        </tr>
        </thead>
        <tbody>
        {% for obj in object_list %}
            <tr>
                <td>{{ page_obj.start_index|add:forloop.counter0 }}.</td>
                <td>{{ obj.category|default:"-" }}</td>
                <td>{{ obj.name|default:"-" }}</td>
                <td>{{ obj.amount|floatformat:2 }}</td>
                <td>{{ obj.date }}</td>
                <td>
                    <a href="{% url 'expenses:expense-edit' obj.id %}">edit</a>
                    <a href="{% url 'expenses:expense-delete' obj.id %}">delete</a>
                </td>
            </tr>
        {% empty %}
            <tr>
                <td colspan="5">no items</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>

    <script>
        $(document).ready(function () {
            $('#dtBasicExample').DataTable({searching: false, paging: false, info: false});
            $('.dataTables_length').addClass('bs-select');
        });
    </script>



    {% include "_pagination.html" %}
    <hr>
    <table class="table table-striped table-bordered table-sm" style="width:30%;">
        <caption>Summary per category</caption>

        {% for category, total in summary_per_category.items %}
            <tr>
                <td>{{ category }}:</td>
                <td>{{ total|floatformat:2 }}</td>
            </tr>
        {% endfor %}
        <tr style="font-weight: bold;">
            <td>Total amount spent:</td>
            <td>
                {{ total_amount|floatformat:2 }}
            </td>
        </tr>
    </table>
{% endblock %}
